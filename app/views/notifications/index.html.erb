<h1>Notifications</h1>

<% if @notifications.any? %>
  <ul>
    <% @notifications.each do |notification| %>
      <li>
        <p>
          <strong>From:</strong> <%= notification.sender.username %><br>
          <strong>Message:</strong> <%= notification.message %><br>
          <strong>Received at:</strong> <%= notification.created_at.strftime('%Y-%m-%d %H:%M:%S') %>
        </p>

        <% if notification.message.include?('follow request') %>
          <% follow = current_user.follower_relationships.find_by(follower_id: notification.sender_id, status: 'pending') %>
          <% if follow %>
            <%= button_to 'Accept',
                          accept_follow_path(id: follow.id, follower_id: notification.sender_id),
                          method: :patch,
                          class: 'btn btn-success',
                          data: { confirm: 'Are you sure you want to accept this follow request?' } %>
          <% else %>
            <p>Follow request not found.</p>
          <% end %>
        <% end %>
      </li>
      <hr>
    <% end %>
  </ul>
<% else %>
  <p>No notifications found.</p>
<% end %>
