<h1><%= @post.user.username %></h1>
<p><%= @post.location %></p>

<% if @post.images.attached? %>
  <div style="text-align: center;">
    <% @post.images.each do |image| %>
      <%= image_tag image, size: "300x300", style: "display: inline-block; margin: 10px;" %>
    <% end %>
  </div>
<% else %>
  <p>No images attached.</p>
<% end %>

<h3><small><%= @post.content %></small></h3>

<h2>Comments</h2>

<% if @comments.any? %>
  <ul>
    <% @comments.each do |comment| %>
      <li>
        <span><strong><%= comment.user.username %></strong>:</span>
        <span><%= comment.content %></span>

        <% if comment.user == current_user %>
          <span>
            <%= form_with(model: [@post, comment], local: true, method: :patch) do |form| %>
              <%= form.text_area :content, rows: 1, style: "width: 300px; display: inline;" %>
              <%= form.submit "Update Comment", style: "display: inline;" %>
            <% end %>
          </span>
          <span>
            <%= button_to 'Delete', post_comment_path(@post, comment), method: :delete, data: { confirm: "Are you sure?" }, style: "display: inline;" %>
          </span>
        <% end %>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>No comments yet. Be the first to comment!</p>
<% end %>

<h3>Leave a Comment</h3>
<%= form_with(model: [@post, @comment], local: true) do |form| %>
  <div>
    <%= form.label :content, "Your Comment:" %>
    <%= form.text_area :content, rows: 3 %>
  </div>
  <div>
    <%= form.submit "Post Comment" %>
  </div>
<% end %>
